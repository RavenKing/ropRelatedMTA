{"version":3,"sources":["components/Header.js","components/utils.js","components/ForceGraphGenerator.js","components/ForceGraph.js","App.js","reportWebVitals.js","index.js","components/forceGraph.module.css"],"names":["Header","skills","searchSkill","skill","className","style","marginTop","width","placeholder","data","onSelect","record","value","fuseConfigs","threshold","defaultProps","title","createContextMenu","event","d","menuItems","height","svgId","x","y","d3","styles","contextMenu","remove","append","attr","selectAll","enter","menuEntry","cursor","i","on","action","text","menuFactory","pageX","pageY","preventDefault","ForceGraphGenerator","container","linksData","nodesData","nodeHoverTooltip","userNodeClicked","openDialog","links","map","Object","assign","nodes","containerRect","getBoundingClientRect","color","dragInteraction","node","fx","fy","simulation","alpha","restart","e","console","log","document","querySelector","tooltipDiv","createElement","classList","add","tooltip","opacity","id","body","appendChild","div","force","name","distance","strength","svg","call","transform","link","join","Math","sqrt","alert","group","label","hoverTooltip","transition","duration","html","addTooltip","target","innerHTML","source","destroy","stop","ForceGraph","dialogRef","useRef","useState","targetSkill","setTargetSkill","sourceSkill","setSourceSkill","skillShow","current","open","ComboBoxComponent","Wizard","icon","onSelectionChange","slot","WizardStep","heading","disabled","selected","MessageStrip","onClose","parseFloat","similarity","toFixed","Switch","onChange","textOff","textOn","TextArea","onInput","Button","containerRef","userNodes","setuserNodes","Set","focussedSkills","setfocussedSkills","allData","setAllData","setSkillShow","useCallback","fetchSkills","a","resNodes","JsonData","resLinks","useEffect","getSkills","linkFound","filter","nodeResult","l","push","nodeFound","includes","querySelectorAll","childNodes","length","getUserSkills","targetNodes","allNodes","setGroupOnuserNodes","forEach","element","setGroupOn","prev","setGroupOff","setGroupOffuserNodes","setbackSkillGraph","size","setSkillGraph","setTimeout","userNodesClicked","nodeName","destroyFn","ref","createPortal","Dialog","App","v","key","floor","random","primary-title","src","Fragment","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById","module","exports"],"mappings":"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","file":"static/js/main.25f72b2b.chunk.js","sourcesContent":["import PropTypes from \"prop-types\";\r\n// import Button from \"./Button\";\r\n// import { useRef,useState } from \"react\";\r\nimport ReactSearchBox from \"react-search-box\";\r\n// import { Dialog, Button } from \"@ui5/webcomponents-react\";\r\n// import { createPortal } from \"react-dom\";\r\n// import JsonData from \"../data/db.json\";\r\n\r\n// const DialogComponent = ({ targetSkill }) => {\r\n//   const dialogRef = useRef(null);\r\n//   const [allData, setAllData] = useState({\r\n//     nodes: JsonData.nodes,\r\n//     links: JsonData.links,\r\n//   });\r\n//   const onButtonClick = () => {\r\n//     console.log(targetSkill);\r\n//     dialogRef.current.open();\r\n//   };\r\n//   return (\r\n//     <>\r\n//       <Button onClick={onButtonClick}>Open Dialog</Button>\r\n//       {createPortal(<Dialog ref={dialogRef} />, document.body)}\r\n//     </>\r\n//   );\r\n// };\r\n\r\nconst Header = ({ skills, skill, searchSkill }) => {\r\n  return (\r\n    <>\r\n      <header className=\"header\">\r\n        <div style={{ marginTop: \"8px\", width: \"80%\" }}>\r\n          {/* search box can be improved using Levenstein distance */}\r\n          <ReactSearchBox\r\n            placeholder=\"Enter skill name...\"\r\n            data={skills}\r\n            onSelect={(record) => {\r\n              searchSkill(record.value);\r\n            }}\r\n            fuseConfigs={{\r\n              //fuzzy search\r\n              threshold: 0.1,\r\n            }}\r\n          />\r\n        </div>{\" \"}\r\n        {/* <DialogComponent targetSkill={skill}></DialogComponent> */}\r\n      </header>\r\n    </>\r\n  );\r\n};\r\n\r\nHeader.defaultProps = {\r\n  title: \"Top Related Skill Graph\",\r\n};\r\n\r\nHeader.propTypes = {\r\n  title: PropTypes.string.isRequired,\r\n};\r\n\r\n// CSS in JS\r\n// const headingStyle = {\r\n//     color: 'red', backgroundColor: 'black'\r\n// }\r\n\r\nexport default Header;\r\n","import * as d3 from \"d3\";\r\nimport styles from \"./forceGraph.module.css\";\r\n\r\nexport const menuFactory = (x, y, menuItems, data, svgId) => {\r\n  d3.select(`.${styles.contextMenu}`).remove();\r\n\r\n  // Draw the menu\r\n  d3.select(svgId)\r\n    .append(\"g\")\r\n    .attr(\"class\", styles.contextMenu)\r\n    .selectAll(\"tmp\")\r\n    .data(menuItems)\r\n    .enter()\r\n    .append(\"g\")\r\n    .attr(\"class\", styles.menuEntry)\r\n    .style({\r\n      cursor: \"pointer\"\r\n    });\r\n\r\n  // Draw menu entries\r\n  d3.selectAll(`.${styles.menuEntry}`)\r\n    .append(\"rect\")\r\n    .attr(\"x\", x)\r\n    .attr(\"y\", (d, i) => {\r\n      return y + i * 30;\r\n    })\r\n    .attr(\"rx\", 2)\r\n    .attr(\"width\", 150)\r\n    .attr(\"height\", 30)\r\n    .on(\"click\", (d) => {\r\n      menuItems[0].action(data)\r\n    });\r\n  //  d3.selectAll(`.${styles.menuEntry}`)\r\n  //     .append(\"text\")\r\n  //     .text((d) => {\r\n  //       return d.title;\r\n  //     })\r\n  d3.selectAll(`.${styles.menuEntry}`)\r\n    .append(\"text\")\r\n    .text((d) => {\r\n      return d.title;\r\n    })\r\n    .attr(\"x\", x)\r\n    .attr(\"y\", (d, i) => {\r\n      return y + i * 30;\r\n    })\r\n    .attr(\"dy\", 20)\r\n    .attr(\"dx\", 45)\r\n    .on(\"click\", (d) => {\r\n      menuItems[0].action(data)\r\n    });\r\n\r\n  // Other interactions\r\n  d3.select(\"body\").on(\"click\", () => {\r\n    d3.select(`.${styles.contextMenu}`).remove();\r\n  });\r\n};\r\n\r\nexport const createContextMenu = (\r\n  event,\r\n  d,\r\n  menuItems,\r\n  width,\r\n  height,\r\n  svgId\r\n) => {\r\n  menuFactory(\r\n    event.pageX - width / 3,\r\n    event.pageY - height / 1.5,\r\n    menuItems,\r\n    d,\r\n    svgId\r\n  );\r\n  event.preventDefault();\r\n};","import * as d3 from \"d3\";\r\nimport styles from \"./forceGraph.module.css\";\r\nimport {\r\n  createContextMenu\r\n} from \"./utils\";\r\n\r\nconst ForceGraphGenerator = (\r\n  container,\r\n  linksData,\r\n  nodesData,\r\n  nodeHoverTooltip,\r\n  userNodeClicked,\r\n  openDialog\r\n) => {\r\n  const links = linksData.map((d) => Object.assign({}, d));\r\n  const nodes = nodesData.map((d) => Object.assign({}, d));\r\n\r\n  const containerRect = container.getBoundingClientRect();\r\n  const height = containerRect.height;\r\n  const width = containerRect.width;\r\n  const color = d3.scaleOrdinal(d3.schemeCategory10);\r\n\r\n  const dragInteraction = d3.drag().on(\"drag\", (event, node) => {\r\n    node.fx = event.x;\r\n    node.fy = event.y;\r\n    simulation.alpha(1);\r\n    simulation.restart();\r\n  });\r\n\r\n  const menuItems = [{\r\n    title: \"Feedback\",\r\n    action: function (e) {\r\n      openDialog(e);\r\n      console.log(linksData)\r\n      //console.log(e)\r\n    }\r\n  }];\r\n\r\n  // Add the tooltip element to the graph\r\n  const tooltip = document.querySelector(\"#graph-tooltip\");\r\n  if (!tooltip) {\r\n    const tooltipDiv = document.createElement(\"div\");\r\n    tooltipDiv.classList.add(styles.tooltip);\r\n    tooltipDiv.style.opacity = \"0\";\r\n    tooltipDiv.id = \"graph-tooltip\";\r\n    document.body.appendChild(tooltipDiv);\r\n  }\r\n  const div = d3.select(\"#graph-tooltip\");\r\n\r\n  const addTooltip = (hoverTooltip, d, x, y) => {\r\n    div.transition().duration(200).style(\"opacity\", 0.9);\r\n    div\r\n      .html(hoverTooltip(d))\r\n      .style(\"left\", `${x}px`)\r\n      .style(\"top\", `${y - 28}px`);\r\n  };\r\n\r\n  const removeTooltip = () => {\r\n    div.transition().duration(200).style(\"opacity\", 0);\r\n  };\r\n\r\n  const simulation = d3\r\n    .forceSimulation(nodes)\r\n    .force(\r\n      \"link\",\r\n      d3\r\n      .forceLink(links)\r\n      .id((d) => d.name)\r\n      .distance((d) => 100)\r\n    )\r\n    .force(\"charge\", d3.forceManyBody().strength(-300))\r\n    .force(\"x\", d3.forceX())\r\n    .force(\"y\", d3.forceY());\r\n\r\n  const svg = d3\r\n    .select(container)\r\n    .append(\"svg\")\r\n    .attr(\"id\", \"graphSvg\")\r\n    .attr(\"viewBox\", [-width / 2, -height / 2, width, height])\r\n    .call(\r\n      d3.zoom().on(\"zoom\", function (event) {\r\n        svg.attr(\"transform\", event.transform);\r\n      })\r\n    );\r\n\r\n  const link = svg\r\n    .append(\"g\")\r\n    .attr(\"stroke\", \"#999\")\r\n    .attr(\"stroke-opacity\", 0.6)\r\n    .selectAll(\"line\")\r\n    .data(links)\r\n    .join(\"line\")\r\n    .attr(\"stroke-width\", (d) => Math.sqrt(d.value));\r\n\r\n\r\n  link\r\n    .on(\"click\", (event) => {\r\n      //   console.log(event.target.innerHTML);\r\n      alert(\"what\")\r\n    });\r\n  const node = svg\r\n    .append(\"g\")\r\n    .attr(\"stroke\", \"#fff\")\r\n    .attr(\"stroke-width\", 2)\r\n    .selectAll(\"circle\")\r\n    .data(nodes)\r\n    .join(\"circle\")\r\n    .on(\"contextmenu\", (event, d) => {\r\n      createContextMenu(event, d, menuItems, width, height, \"#graphSvg\");\r\n    })\r\n    .attr(\"r\", 12)\r\n    .attr(\"fill\", function (d) {\r\n      return color(d.group);\r\n    })\r\n\r\n    // .call(drag(simulation));\r\n    .call(dragInteraction);\r\n\r\n  const label = svg\r\n    .append(\"g\")\r\n    .attr(\"class\", \"labels\")\r\n    .selectAll(\"text\")\r\n    .data(nodes)\r\n    .enter()\r\n    .append(\"text\")\r\n    .on(\"contextmenu\", (event, d) => {\r\n      createContextMenu(event, d, menuItems, width, height, \"#graphSvg\");\r\n    })\r\n    .attr(\"text-anchor\", \"middle\")\r\n    .attr(\"dominant-baseline\", \"central\")\r\n    .text(function (d) {\r\n      return d.name;\r\n    })\r\n    .style(\"font-size\", \"8px\")\r\n    // .call(drag(simulation));\r\n    .call(dragInteraction);\r\n\r\n  label\r\n    .on(\"mouseover\", (event, d) => {\r\n      addTooltip(nodeHoverTooltip, d, event.pageX, event.pageY);\r\n    })\r\n    .on(\"mouseout\", () => {\r\n      removeTooltip();\r\n    })\r\n    .on(\"click\", (event) => {\r\n      //   console.log(event.target.innerHTML);\r\n      userNodeClicked(event.target.innerHTML);\r\n    });\r\n\r\n  simulation.on(\"tick\", () => {\r\n    //update link positions\r\n    link\r\n      .attr(\"x1\", (d) => d.source.x)\r\n      .attr(\"y1\", (d) => d.source.y)\r\n      .attr(\"x2\", (d) => d.target.x)\r\n      .attr(\"y2\", (d) => d.target.y);\r\n\r\n    // update node positions\r\n    node.attr(\"cx\", (d) => d.x).attr(\"cy\", (d) => d.y);\r\n\r\n    // update label positions\r\n    label\r\n      .attr(\"x\", (d) => {\r\n        return d.x;\r\n      })\r\n      .attr(\"y\", (d) => {\r\n        return d.y;\r\n      });\r\n  });\r\n\r\n  return {\r\n    destroy: () => {\r\n      simulation.stop();\r\n    },\r\n    nodes: () => {\r\n      return svg.node();\r\n    },\r\n  };\r\n};\r\n\r\nexport default ForceGraphGenerator;","import React, { useRef, useEffect, useState, useCallback } from \"react\";\r\nimport ForceGraphGenerator from \"./ForceGraphGenerator\";\r\nimport styles from \"./forceGraph.module.css\";\r\nimport JsonData from \"../data/db.json\";\r\n\r\nimport { Dialog, Wizard,WizardStep,TextArea,Button,MessageStrip,Switch  } from \"@ui5/webcomponents-react\";\r\nimport { createPortal } from \"react-dom\";\r\n\r\n// const DialogComponent = () => {\r\n//   const dialogRef = useRef(null);\r\n//   const onButtonClick = () => {\r\n//     //console.log(targetSkill);\r\n//     dialogRef.current.open();\r\n//   };\r\n//   return (\r\n//     <>\r\n//       <Button onClick={onButtonClick}>Open Dialog</Button>\r\n//       {createPortal(<Dialog ref={dialogRef} />, document.body)}\r\n//     </>\r\n//   );\r\n// };\r\n\r\nconst ForceGraph = ({ skill }) => {\r\n  const dialogRef = useRef(null);\r\n  const [targetSkill,setTargetSkill] = useState(\"\")\r\n  const [sourceSkill,setSourceSkill] = useState({})\r\n  const openDialog = (e) => {\r\n    //console.log(targetSkill);\r\n    console.log(e);\r\n    setTargetSkill(e.name);\r\n    console.log(skillShow);\r\n    skillShow.links.map((source)=>{\r\n      if(source.target===e.name)\r\n      {\r\n        setSourceSkill(source) \r\n      }\r\n    })\r\n    dialogRef.current.open();\r\n  };\r\n  const ComboBoxComponent=()=>{\r\n    return (\r\n    <div>\r\n   <Wizard\r\n    icon=\"hint\"\r\n  className=\"\"\r\n  onSelectionChange={function noRefCheck(){}}\r\n  slot=\"\"\r\n  style={{\r\n    height: '400px',\r\n    width:'600px'\r\n  }}\r\n  tooltip=\"\"\r\n>\r\n  <WizardStep\r\n    heading= {sourceSkill.source}\r\n    icon=\"hint\"\r\n    disabled\r\n  >\r\n  </WizardStep>\r\n  <WizardStep\r\n    heading= {targetSkill}\r\n    icon=\"hint\"\r\n    selected\r\n  >\r\n    <MessageStrip\r\n  className=\"\"\r\n  onClose={function noRefCheck(){}}\r\n  slot=\"\"\r\n  style={{}}\r\n  tooltip=\"\"\r\n>\r\n  The similarity between {sourceSkill.source} and {sourceSkill.target} is {parseFloat(sourceSkill.similarity).toFixed(2)}!\r\n  Agree or Deny the relationship will help us improve our tool.\r\n</MessageStrip>\r\nAre they Relavent?<Switch\r\n  className=\"\"\r\n  onChange={function noRefCheck(){}}\r\n  slot=\"\"\r\n  style={{}}\r\n  textOff=\"\"\r\n  textOn=\"\"\r\n  tooltip=\"\"\r\n/>\r\n<br/>\r\n\r\nComments：\r\n\r\n     <TextArea\r\n  className=\"\"\r\n  onChange={function noRefCheck(){}}\r\n  onInput={function noRefCheck(){}}\r\n  slot=\"\"\r\n  style={{}}\r\n  tooltip=\"\"\r\n/>\r\n<Button style={{marginTop:\"10px\"}}> submit </Button>\r\n  </WizardStep>\r\n  </Wizard>\r\n\r\n  </div>)\r\n   \r\n  };\r\n\r\n  const containerRef = useRef(null);\r\n  const [userNodes, setuserNodes] = useState([]);\r\n  const [focussedSkills, setfocussedSkills] = useState(new Set());\r\n  let [allData, setAllData] = useState({\r\n    nodes: [],\r\n    links: [],\r\n  });\r\n  const [skillShow, setSkillShow] = useState({\r\n    nodes: [],\r\n    links: [],\r\n  });\r\n\r\n  const nodeHoverTooltip = useCallback((node) => {\r\n    return `<div>     \r\n      <b>${node.name}</b>\r\n    </div>`;\r\n  }, []);\r\n\r\n  const fetchSkills = async () => {\r\n    \r\n    const resNodes = JsonData.nodes;\r\n    // const nodeData = await resNodes.json();\r\n    const resLinks =  JsonData.links\r\n    // const linkData = await resLinks.json();\r\n    setAllData({ nodes: resNodes, links: resLinks });\r\n    // return { nodeData, linkData };\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(\"get all data...\");\r\n    fetchSkills();\r\n  }, []);\r\n\r\n  const getSkills = async (skill) => {\r\n    console.log(\"get skill now...\");\r\n    // const { nodeData, linkData } = await fetchSkills();\r\n    const linkFound = allData.links.filter((link) => link.source === skill);\r\n    const nodeResult = linkFound.map((l) => l.target);\r\n    nodeResult.push(skill);\r\n    const nodeFound = allData.nodes.filter((node) =>\r\n      nodeResult.includes(node.name)\r\n    );\r\n    setSkillShow({\r\n      nodes: nodeFound,\r\n      links: linkFound,\r\n    });\r\n    if (document.querySelectorAll(\"#forceGraph\")[0].childNodes.length > 0) \r\n    {\r\n      document\r\n        .querySelectorAll(\"#forceGraph\")[0]\r\n        .childNodes[0].remove();\r\n    }\r\n  };\r\n\r\n  const getUserSkills = async (skill) => {\r\n    console.log(\"get user skill now...\");\r\n    // const { nodeData, linkData } = await fetchSkills();\r\n    const targetNodes = [...userNodes];\r\n    targetNodes.push(skill);\r\n    const linkFound = allData.links.filter((link) =>\r\n      targetNodes.includes(link.source)\r\n    );\r\n    const nodeResult = linkFound.map((l) => l.target);\r\n    nodeResult.push(skill);\r\n    const allNodes = [...nodeResult, targetNodes];\r\n    const nodeFound = allData.nodes.filter((node) =>\r\n      allNodes.includes(node.name)\r\n    );\r\n    setSkillShow({\r\n      nodes: nodeFound,\r\n      links: linkFound,\r\n    });\r\n    if (\r\n      document.querySelectorAll(\"#forceGraph\")[0].childNodes\r\n        .length > 0\r\n    ) {\r\n      document\r\n        .querySelectorAll(\"#forceGraph\")[0]\r\n        .childNodes[0].remove();\r\n    }\r\n  };\r\n\r\n\r\n  const setGroupOnuserNodes = async () => {\r\n    // const skillToUpdate = async (name) => {\r\n    //   const item = await fetchSkill(name);\r\n    //   updateSkillToOne(item[0]);\r\n    // };\r\n    const nodeFound = allData.nodes.filter((node) =>\r\n      userNodes.includes(node.name)\r\n    );\r\n\r\n    console.log(nodeFound);\r\n    nodeFound.forEach((element) => {\r\n      element.group = 1;\r\n    });\r\n  };\r\n\r\n  const setGroupOn = async (name) => {\r\n    // const item = await fetchSkill(name);\r\n    // updateSkillToOne(item[0]);\r\n    const nodeFound = allData.nodes.filter((node) => node.name === name);\r\n    nodeFound[0].group = 1;\r\n    console.log(nodeFound);\r\n\r\n    setfocussedSkills((prev) => prev.add(name));\r\n  };\r\n\r\n\r\n\r\n  const setGroupOff = async () => {\r\n    // const skillToUpdate = async (name) => {\r\n    //   const item = await fetchSkill(name);\r\n    //   updateSkillBackToZero(item[0]);\r\n    // };\r\n    focussedSkills.forEach((element) => {\r\n      const nodeFound = allData.nodes.filter((node) => node.name === element);\r\n      nodeFound[0].group = 0;\r\n      // skillToUpdate(element);\r\n    });\r\n    setfocussedSkills(new Set());\r\n  };\r\n\r\n  const setGroupOffuserNodes = async () => {\r\n    userNodes.forEach((element) => {\r\n      const nodeFound = allData.nodes.filter((node) => node.name === element);\r\n      nodeFound[0].group = 0;\r\n      // skillToUpdate(element);\r\n    });\r\n    setuserNodes([]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const setbackSkillGraph = async () => {\r\n      if (focussedSkills.size > 0) {\r\n        await setGroupOff();\r\n        await setGroupOffuserNodes();\r\n      }\r\n    };\r\n    const setSkillGraph = async () => {\r\n      if (skill !== \"\") {\r\n        await setGroupOn(skill);\r\n        setTimeout(() => {\r\n          getSkills(skill);\r\n        }, 200);\r\n      }\r\n    };\r\n    setbackSkillGraph();\r\n    setSkillGraph();\r\n  }, [skill]);\r\n\r\n  const userNodesClicked = (nodeName) => {\r\n    setuserNodes((userNodes) => [...userNodes, nodeName]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (userNodes.length > 0) {\r\n      console.log(userNodes);\r\n      setGroupOnuserNodes();\r\n      setTimeout(() => {\r\n        getUserSkills(skill);\r\n      }, 100);\r\n    }\r\n  }, [userNodes]);\r\n\r\n  useEffect(() => {\r\n    let destroyFn;\r\n    if (containerRef.current && skillShow.links.length > 0) {\r\n      console.log(\"graph regenerated...\");\r\n      const { destroy } = ForceGraphGenerator(\r\n        containerRef.current,\r\n        skillShow.links,\r\n        skillShow.nodes,\r\n        nodeHoverTooltip,\r\n        userNodesClicked,\r\n        openDialog\r\n      );\r\n      destroyFn = destroy;\r\n    }\r\n\r\n    return destroyFn;\r\n  }, [skillShow]);\r\n\r\n  return <><div ref={containerRef} className={styles.container} id=\"forceGraph\"/>\r\n      {createPortal(<Dialog ref={dialogRef} >\r\n      <ComboBoxComponent />\r\n      </Dialog>, document.body)}\r\n  </>;\r\n};\r\n\r\nexport default ForceGraph;\r\n","import React, { useState } from \"react\";\r\nimport Header from \"./components/Header\";\r\nimport JsonData from \"./data/skill.json\";\r\nimport \"@ui5/webcomponents-fiori/dist/ShellBar.js\";\r\nimport ForceGraph from \"./components/ForceGraph\";\r\n\r\n// import data from './data/layer3.json'\r\n\r\nfunction App() {\r\n  const [skill, searchSkill] = useState(\"\");\r\n  const skills = [];\r\n  JsonData.map((v) => {\r\n    const key = Math.floor(Math.random() * 10000000 + 1);\r\n    return skills.push({ key, ...v });\r\n  });\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <ui5-shellbar\r\n        primary-title=\"Top Skills\"\r\n       \r\n      >\r\n        <ui5-avatar slot=\"profile\" icon=\"customer\"></ui5-avatar>\r\n        <img slot=\"logo\" src=\"https://sap.github.io/ui5-webcomponents/assets/images/sap-logo-svg.svg\" />\r\n        <ui5-button icon=\"nav-back\" slot=\"startButton\"></ui5-button>\r\n      </ui5-shellbar>\r\n      <Header\r\n      skills={skills}\r\n        searchSkill={searchSkill}\r\n        skill={skill}\r\n      />\r\n     \r\n      {/* <React.Fragment>\r\n        <ForceGraph linksData={data.links} nodesData={data.nodes} nodeHoverTooltip={nodeHoverTooltip} />\r\n      </React.Fragment> */}\r\n\r\n      <React.Fragment>\r\n        <ForceGraph skill={skill} />\r\n      </React.Fragment>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"forceGraph_container__2Fpro\",\"node\":\"forceGraph_node__3azZm\",\"tooltip\":\"forceGraph_tooltip__24MRW\",\"contextMenu\":\"forceGraph_contextMenu__jf9Zf\",\"menuEntry\":\"forceGraph_menuEntry__2lL43\"};"],"sourceRoot":""}